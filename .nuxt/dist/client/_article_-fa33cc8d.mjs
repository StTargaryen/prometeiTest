var rt=Object.defineProperty;var U=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var D=(n,o,a)=>o in n?rt(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a,G=(n,o)=>{for(var a in o||(o={}))ot.call(o,a)&&D(n,a,o[a]);if(U)for(var a of U(o))st.call(o,a)&&D(n,a,o[a]);return n};import{_ as z,g as at,r as I,o as x,d as _,b as e,k as V,F as B,i as j,n as f,l as lt,G as nt,m as ct,f as d,u as q,c as w,w as b,a as it,h as A,t as g,H as k,e as dt,v as ut,I as xt,J as pt,j as mt}from"./entry-6033a8be.mjs";import{u as gt}from"./asyncData-c2770651.mjs";import{G as _t}from"./gql-e9cfd887.mjs";const vt={name:"image-viewer",props:{modelValue:{type:Array,required:!0}},setup(n){const o=n.modelValue,a=at(),t=u=>{const s=u.attributes.url;return`${a.API_URL}${s}`},m=o.map(u=>G({imageLink:t(u)},u)),v=I({}),c=u=>{v.value=u};return m&&m.length&&c(m[0]),{currentImage:v,selectImage:c,imagesWithImageLink:m}}},bt={class:"w-[400px]"},ht={class:"flex gap-[10px]"},ft=["onClick"];function yt(n,o,a,t,m,v){return x(),_("div",bt,[e("div",{class:"w-full h-[400px] bg-center bg-cover mb-[10px] rounded-[4px]",style:V(`background-image: url('${t.currentImage.imageLink}')`)},null,4),e("div",ht,[(x(!0),_(B,null,j(t.imagesWithImageLink,c=>(x(),_("button",{class:f(["w-[86px] h-[86px] flex items-center justify-center rounded-[4px]",{"border-[2px] border-primary":t.currentImage.id===c.id}]),onClick:u=>t.selectImage(c)},[e("div",{class:"w-[70px] h-[70px] bg-center bg-cover",style:V(`background-image: url('${c.imageLink}')`)}," \u2013 ",4)],10,ft))),256))])])}var Ct=z(vt,[["render",yt]]);const wt={async setup(n,{expose:o}){o();let a,t;const m=lt(),v=nt(),c=m.params.article,{data:u,error:s}=([a,t]=ct(()=>gt(`single-product-${c}`,()=>_t({article:c}))),a=await a,t(),a),l=d(()=>u.value.products.data[0]);console.log(l.value),(s.value||!l.value)&&v.push("/404");const W=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.title)||""}),E=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.price)||null}),L=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.images.data)||[]}),J=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.article)||"\u2013"}),O=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.tags.data)||[]}),K=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.section.data)||null}),Q=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.category.data)||null}),X=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.subcategory.data)||null}),y=d(()=>{var r;return((r=l.value)==null?void 0:r.attributes.colors)||null}),T=I({}),F=r=>{if(!r||!r.hexColor||!r.name||r&&r.disabled)return!1;T.value={name:r.name,hexColor:r.hexColor}};y.value&&y.value.length&&F(y.value[0]);const p=I(1),h=q(),R=d(()=>(console.log("cart items:",h.items),h.items)),S=d(()=>{const r=R.value.find(C=>C.id===l.value.id);return r?(p.value=r.amount,!0):!1}),Y=()=>{const r=p.value;p.value=r.toString().replace(/[^0-9]/g,"")},Z=()=>{(p.value===null||p.value==="")&&(p.value=1)},$=r=>{const C=Number(p.value)+r;p.value>0&&C>0&&(p.value=C)},N=I(!1),tt=r=>{N.value=r},et=d(()=>S.value?N.value?"\u0423\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u043A\u043E\u0440\u0437\u0438\u043D\u044B":"\u0423\u0436\u0435 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0435":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"),H=()=>{h.addToCart({id:l.value.id,amount:Number(p.value),article:l.value.attributes.article,title:l.value.attributes.title,price:l.value.attributes.price,imageUrl:L.value[0].attributes.url})},M=()=>{h.removeFromCart(l.value)},P={route:m,router:v,routeArticle:c,data:u,error:s,currentProduct:l,productTitle:W,productPrice:E,productImages:L,productArticle:J,productTags:O,productSection:K,productCategory:Q,productSubcategory:X,productColors:y,selectedColor:T,selectColor:F,selectedAmount:p,cart:h,cartItems:R,productInCart:S,setCorrectNumber:Y,setNotNullNumber:Z,selectAmount:$,removeFromCart:N,toggleRemoveFromCart:tt,addToCartButton:et,addToCart:H,removeFromStateCart:M,cartHandler:()=>{S.value?M():H()},ImageViewer:Ct,useCart:q};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}},i=n=>(xt("data-v-62b01795"),n=n(),pt(),n),kt={class:"flex-grow"},It={class:"mt-[102px] mb-[40px] flex-grow"},St={class:"max-w-screen-xl w-full mx-auto"},Nt={class:"page-header flex items-center"},At={class:"inline-flex"},Vt=i(()=>e("svg",{class:"w-6 h-6 mt-[2px]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),Bt=i(()=>e("span",null,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E",-1)),jt=i(()=>e("code",{class:"text-grey-text text-[24px] ml-[5px] mr-[5px]"}," / ",-1)),Lt=i(()=>e("span",null,"\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",-1)),Tt=i(()=>e("code",{class:"text-grey-text text-[24px] ml-[5px] mr-[5px]"}," / ",-1)),Ft=i(()=>e("code",{class:"text-grey-text text-[24px] ml-[5px] mr-[5px]"}," / ",-1)),Rt=i(()=>e("code",{class:"text-grey-text text-[24px] ml-[5px] mr-[5px]"}," / ",-1)),Ht=i(()=>e("code",{class:"text-grey-text text-[24px] ml-[5px] mr-[5px]"}," / ",-1)),Mt=i(()=>e("span",{disabled:"",class:"breadcrumb flex items-center text-[21px] text-grey-text cursor-default"},null,-1)),Pt={class:"product flex items-start gap-[190px]"},Ut={class:"product-card flex-grow"},Dt={class:"product-title text-[36px] font-bold text-secondary"},Gt={class:"product-content flex items-start justify-between"},qt={class:"product-info"},zt={class:"product-article text-grey-text mb-[40px]"},Wt={class:"product-specifics flex flex-col text-left justify-start items-start gap-[15px]"},Et={class:"product-specific px-[13px] py-[10px] border-[2px] rounded-[4px] border-primary text-primary"},Jt={class:"product-image"},Ot={class:"product-action w-1/5"},Kt={class:"flex flex-col"},Qt={class:"text-[36px] font-bold text-secondary"},Xt={key:0,class:"divider my-[20px] w-full h-[2px] bg-grey-light shadow-divider rounded-full"},Yt={class:"flex flex-col"},Zt=i(()=>e("span",{class:"text-[21px] text-secondary mb-[10px]"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0446\u0432\u0435\u0442",-1)),$t={class:"grid grid-cols-2 gap-[10px]"},te=["onClick"],ee=i(()=>e("div",{class:"divider my-[20px] w-full h-[2px] bg-grey-light shadow-divider rounded-full"},null,-1)),re={class:"w-full mb-[20px]"},oe=i(()=>e("div",{class:"text-[21px] text-secondary mb-[10px]"},"\u041A\u043E\u043B-\u0432\u043E",-1)),se={class:"flex justify-between items-center gap-[10px] h-[50px]"},ae=["disabled"],le=i(()=>e("svg",{class:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)),ne=[le],ce=["onchange","disabled"],ie=["disabled"],de=i(()=>e("svg",{class:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),ue=[de];function xe(n,o,a,t,m,v){const c=mt,u=it;return x(),w(u,{name:"shop"},{default:b(()=>[e("div",kt,[e("main",It,[e("div",St,[e("div",Nt,[e("div",At,[A(c,{to:"/",class:"breadcrumb flex items-center text-[21px] text-grey-text hover:text-orange"},{default:b(()=>[Vt,Bt]),_:1}),jt,A(c,{to:"/catalog",class:"breadcrumb flex items-center text-[21px] text-grey-text hover:text-orange"},{default:b(()=>[Lt]),_:1}),Tt,t.productSection?(x(),w(c,{key:0,to:{path:`/catalog/${t.productSection.attributes.slug}`},class:"breadcrumb flex items-center text-[21px] text-grey-text hover:text-orange"},{default:b(()=>[e("span",null,g(t.productSection.attributes.title),1)]),_:1},8,["to"])):k("",!0),Ft,t.productCategory?(x(),w(c,{key:1,to:{path:`/categories/${t.productCategory.attributes.slug}`},class:"breadcrumb flex items-center text-[21px] text-grey-text hover:text-orange"},{default:b(()=>[e("span",null,g(t.productCategory.attributes.title),1)]),_:1},8,["to"])):k("",!0),Rt,t.productCategory&&t.productSubcategory?(x(),w(c,{key:2,to:{path:`/categories/${t.productCategory.attributes.slug}/${t.productSubcategory.attributes.slug}`},class:"breadcrumb flex items-center text-[21px] text-grey-text hover:text-orange"},{default:b(()=>[e("span",null,g(t.productSubcategory.attributes.title),1)]),_:1},8,["to"])):k("",!0),Ht,Mt])]),e("div",Pt,[e("div",Ut,[e("div",Dt,g(t.productTitle),1),e("div",Gt,[e("div",qt,[e("div",zt," \u041A\u043E\u0434 \u043F\u0440\u043E\u0434\u0443\u043A\u0442\u0430: "+g(t.productArticle),1),e("ul",Wt,[(x(!0),_(B,null,j(t.productTags,s=>(x(),_("li",Et,g(s.attributes.name),1))),256))])]),e("div",Jt,[A(t.ImageViewer,{modelValue:t.productImages,"onUpdate:modelValue":o[0]||(o[0]=s=>t.productImages=s)},null,8,["modelValue"])])])]),e("aside",Ot,[e("div",Kt,[e("span",Qt,g(t.productPrice)+" \u0440\u0443\u0431.",1),t.productColors&&t.productColors.length?(x(),_("div",Xt)):k("",!0),e("div",Yt,[Zt,e("div",$t,[(x(!0),_(B,null,j(t.productColors,s=>(x(),_("button",{class:f([{"opacity-50":s.disabled,"active:bg-opacity-40":!s.disabled,"active:border-primary":!s.disabled,"active:border-opacity-0":!s.disabled,"cursor-not-allowed":s.disabled,disabled:s.disabled,"hover:bg-primary":!s.disabled,"hover:bg-opacity-20":!s.disabled&&t.selectedColor.hexColor!==s.hexColor,"bg-grey-light":t.selectedColor.hexColor!==s.hexColor,"bg-primary text-white border-primary border-opacity-90 bg-opacity-90 cursor-default border-4":t.selectedColor.hexColor===s.hexColor},"w-[120px] h-[80px] rounded-[4px] flex flex-col justify-center items-center transition-colors"]),onClick:l=>t.selectColor(s)},[e("span",{class:"w-[36px] h-[36px] rounded-[4px] shadow-product-color",style:V({backgroundColor:`${s.hexColor}`})},null,4),e("span",null,g(s.name),1)],10,te))),256))])]),ee,e("div",re,[oe,e("div",se,[e("button",{class:f(["w-full h-full p-[2px] text-grey-text transition-colors rounded-[4px] bg-grey-light",{"cursor-pointer hover:text-white hover:bg-orange":!t.productInCart}]),disabled:t.productInCart,onClick:o[1]||(o[1]=s=>t.selectAmount(-1))},ne,10,ae),dt(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>t.selectedAmount=s),class:"w-full h-full text-center text-[26px] focus:border-primary focus:border-[2px] outline-none text-secondary border-grey-light border-[2px] rounded-[4px]",onchange:t.setCorrectNumber(),disabled:t.productInCart,onBlur:o[3]||(o[3]=s=>t.setNotNullNumber())},null,40,ce),[[ut,t.selectedAmount]]),e("button",{class:f(["w-full h-full p-[2px] text-grey-text transition-colors rounded-[4px] bg-grey-light",{"cursor-pointer hover:bg-primary hover:text-white":!t.productInCart}]),disabled:t.productInCart,onClick:o[4]||(o[4]=s=>t.selectAmount(1))},ue,10,ie)])]),e("button",{class:f(["bg-primary h-[70px] text-[21px] font-medium text-white rounded-[4px] transition-all",{"bg-grey-light text-secondary hover:bg-primary hover:bg-opacity-50":t.productInCart}]),onMouseenter:o[5]||(o[5]=s=>t.toggleRemoveFromCart(!0)),onMouseleave:o[6]||(o[6]=s=>t.toggleRemoveFromCart(!1)),onClick:o[7]||(o[7]=s=>t.cartHandler())},g(t.addToCartButton),35)])])])])])])]),_:1})}var be=z(wt,[["render",xe],["__scopeId","data-v-62b01795"]]);export{be as default};
